
[[ga-pollerd-configuration]]
= Configure Pollerd

.Configuration and log files related to pollerd
[options="header, autowidth"]
[cols="1,2"]
|===
| File
| Description

| $OPENNMS_HOME/etc/poller-configuration.xml
| Configuration file for monitors and global daemon configuration.

| $OPENNMS_HOME/logs/poller.log
| Log file for all monitors and the pollerd daemon.

| $OPENNMS_HOME/etc/response-graph.properties
| RRD graph definitions for service response time measurements.

| $OPENNMS_HOME/etc/events/opennms.pollerd.events.xml
| Event definitions for pollerd.
  For example, nodeLostService, interfaceDown, or nodeDown.
|===

You can modify `poller-configuration.xml` to change the behavior for service monitoring.
The configuration file has the following parts:

* Global daemon config
** Define the thread pool size used to run service monitors in parallel.
** Define and configure the critical service for node event correlation.
* Polling packages
** Package to group service monitor configuration parameters.
* Downtime Model
** Configure Pollerd behavior to run tests if an outage is detected.
* Monitor service association
** Based on the name of the service, the implementation for application or network management protocols assignment.

.Global configuration parameters for Pollerd
[source, xml]
----
<poller-configuration threads="30" <1>
                      pathOutageEnabled="false" <2>
                      serviceUnresponsiveEnabled="false"> <3>
----

<1> Size of the thread pool to run service monitors in parallel.
<2> Enable or disable path outage functionality based on a critical node in a network path.
<3> In case of an unresponsive service, generate a `serviceUnresponsive` event instead of an outage.
    This prevents the application of the xref:operation:deep-dive/service-assurance/downtime-model.adoc[Downtime Model] in retesting the service after 30 seconds to help prevent false alarms.

Restart {page-component-title} and Pollerd to apply configuration changes.
You can also reload the configuration to send an event to Pollerd.
You can send an event on the CLI or the web UI.

.Send configuration-reload event on CLI
[source, shell]
----
cd $OPENNMS_HOME/bin
./send-event.pl uei.opennms.org/internal/reloadDaemonConfig --parm 'daemonName Pollerd'
----

.Send configuration-reload event with the web UI
image::service-assurance/04_send-event-WebUI.png[]

[[ga-pollerd-configuration-meta-data]]
== Metadata DSL
The <<deep-dive/meta-data.adoc#ga-meta-data-dsl, Metadata DSL>>(domain specific language) lets you use dynamic configuration in parameter values to interpolate metadata into the parameter.

The syntax lets you use patterns in an expression, whereby the metadata is replaced with a corresponding value during the collection process.

During evaluation of an expression, the following scopes are available:

* Node metadata
* Interface metadata
* Service metadata
