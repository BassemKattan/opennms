// Allow GitHub image rendering
:imagesdir: ../../images

[[ga-opentracing-setup]]

=== Introduction

OpenTracing enables distributed tracing. It enables monitoring a RPC call or a transaction across process boundaries.
Since _{opennms-product-name}_ distributes it's work through _Minion_ and _Sentinel_, there is a requirement to track a RPC request or a Sink message propagating between different processes.
_{opennms-product-name}_ currently supports link:https://www.jaegertracing.io/[Jaeger Tracer] which implements opentracing API.


==== Enabling Tracing on _{opennms-product-name}_

By default, tracing instrumentation _{opennms-product-name}_ uses NoopTracer which does no operation.

Enable Jeager tracing as follows.

[source, sh]
----
echo 'org.opennms.core.tracer=jaeger' >> "$OPENNMS_HOME/etc/opennms.properties.d/jaeger.properties"
----

Jaeger tracer configuration can be added to  `jaeger.properties` specified above. Configuration options are listed link:https://github.com/jaegertracing/jaeger-client-java/blob/master/jaeger-core/README.md[here].


==== Enabling Tracing on _Minion_

Enable Jaeger tracing on _Minion_ by installing `opennms-core-tracing-jaeger` feature.

[source, sh]
----
echo 'opennms-core-tracing-jaeger' >> "$MINION_HOME/etc/featuresBoot.d/jaeger.boot"
----

NOTE: Uninstalling `opennms-core-tracing-jaeger` feature is not supported yet so to disable Jaeger tracer, remove it from features boot file and restart _Minion_.

Jaeger tracer configuration can be added to `$MINION_HOME/etc/system.properties` on _Minion_. Configuration options are listed link:https://github.com/jaegertracing/jaeger-client-java/blob/master/jaeger-core/README.md[here].
